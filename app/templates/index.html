 <!DOCTYPE html>
<html lang="fr">
 <head>
     <meta charset="UTF-8">
     <title>Traduction et doublage vid√©o</title>
     <link rel="stylesheet" href="/static/style.css">
 </head>
 <body>
 <h1>Traduction et doublage vid√©o</h1>
 {% if is_admin %}
 <div id="role-indicator" style="background: #dc3545; color: white; padding: 10px; margin-bottom: 20px;">
     Mode de admin actif
 </div>
 {% elif is_editor %}
 <div id="role-indicator" style="background: #007bff; color: white; padding: 10px; margin-bottom: 20px;">
     Mode I-tech priv√© actif
 </div>
 {% else %}
 <div id="role-indicator" style="background: #28a745; color: white; padding: 10px; margin-bottom: 20px;">
     Mode les saints de MAI actif
 </div>
 {% endif %}
 
 {% if can_generate_video %}
 <!-- Text-to-Video Generation (Admin Only) -->
 <section id="text-to-video-section" style="display: block; margin-bottom: 30px; padding: 20px; border: 2px solid #dc3545; background: #f8d7da;">
     <h2>üé¨ G√©n√©rer une vid√©o √† partir de texte (Stable Diffusion) - Admin</h2>
     <p style="color: #721c24; font-size: 0.9em; margin-bottom: 15px;">
         Cette fonctionnalit√© g√©n√®re une vid√©o √† partir de texte en utilisant Stable Diffusion WebUI et des mod√®les Dreambooth.
     </p>
     <form id="text-to-video-form">
         <fieldset>
             <legend>Texte</legend>
             <label>
                 Texte √† convertir en vid√©o :
                 <textarea name="text" id="text-to-video-input" rows="5" style="width: 100%; padding: 8px; font-family: inherit;" placeholder="Entrez le texte ici..."></textarea>
             </label>
         </fieldset>
         <fieldset>
             <legend>Personnage (optionnel)</legend>
             <label>
                 S√©lectionner un personnage :
                 <select name="character_id" id="text-to-video-character" style="width: 100%; padding: 8px;">
                     <option value="">Aucun personnage</option>
                 </select>
             </label>
             <p style="font-size: 0.9em; color: #666; margin-top: 5px;">
                 Les personnages entra√Æn√©s seront automatiquement utilis√©s dans la g√©n√©ration.
             </p>
         </fieldset>
         <fieldset>
             <legend>Param√®tres</legend>
             <label>
                 Mod√®le Dreambooth (optionnel, ignor√© si un personnage est s√©lectionn√©) :
                 <input type="text" name="model_name" id="text-to-video-model" placeholder="Nom du mod√®le (laisser vide pour le mod√®le par d√©faut)" style="width: 100%; padding: 8px;">
             </label>
             <label style="margin-top: 10px; display: block;">
                 <input type="checkbox" name="image_per_sentence" id="text-to-video-sentence" checked>
                 G√©n√©rer une image par phrase
             </label>
         </fieldset>
         <fieldset>
             <legend>Dossier (optionnel)</legend>
             <label>
                 Dossier :
                 <select name="folder_path" id="text-to-video-folder">
                     <option value="">Aucun dossier (racine)</option>
                 </select>
             </label>
         </fieldset>
         <fieldset>
             <legend>Confidentialit√©</legend>
             <label>
                 <input type="checkbox" name="is_private" id="text-to-video-private">
                 Fichier priv√© (visible uniquement par les √©diteurs)
             </label>
         </fieldset>
         <button type="submit" id="text-to-video-submit" style="margin-top: 15px; padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">
             G√©n√©rer la vid√©o
         </button>
     </form>
     <div id="text-to-video-status" style="margin-top: 15px; padding: 10px; display: none;"></div>
 </section>
 {% endif %}

 {% if is_admin %}
 <!-- Image Generation with ModelsLab Flux 2 Pro - Admin Only -->
 <section id="image-generation-section" style="display: block; margin-bottom: 30px; padding: 20px; border: 2px solid #007bff; background: #f0f8ff;">
     <h2>üé® G√©n√©rer une image avec Flux 2 Pro (Admin)</h2>
     <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
         Cr√©ez une image √† partir d'un prompt texte en utilisant ModelsLab Flux 2 Pro Text To Image.
     </p>
     <form id="image-generation-form">
         <fieldset>
             <legend>Prompt</legend>
             <label>
                 Description de l'image :
                 <textarea name="prompt" id="image-prompt-input" rows="4" style="width: 100%; padding: 8px; font-family: inherit;" placeholder="D√©crivez l'image que vous souhaitez g√©n√©rer..." required></textarea>
             </label>
         </fieldset>
         <fieldset>
             <legend>Param√®tres</legend>
             <label style="display: inline-block; margin-right: 20px;">
                 Largeur :
                 <input type="number" name="width" id="image-width" value="1024" min="64" max="2048" step="64" style="width: 100px; padding: 8px;">
             </label>
             <label style="display: inline-block;">
                 Hauteur :
                 <input type="number" name="height" id="image-height" value="1024" min="64" max="2048" step="64" style="width: 100px; padding: 8px;">
             </label>
         </fieldset>
         <button type="submit" id="generate-image-btn" style="margin-top: 15px; padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
             üé® G√©n√©rer l'image
         </button>
     </form>
    <div id="image-generation-status" style="margin-top: 15px; padding: 10px; display: none;"></div>
    <div id="generated-image-container" style="margin-top: 20px; display: none;">
        <img id="generated-image" src="" alt="Generated image" style="max-width: 100%; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;">
        <a id="download-image-link" href="" download style="display: inline-block; padding: 8px 15px; background: #007bff; color: white; text-decoration: none; border-radius: 3px;">T√©l√©charger l'image</a>
    </div>
</section>

{% if is_admin %}
<section id="video-generation-section" style="display: block; margin-bottom: 30px; padding: 20px; border: 2px solid #9c27b0; background: #f3e5f5;">
    <h2>üé¨ G√©n√©rer une vid√©o avec Video Fusion (Admin)</h2>
    <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
        Cr√©ez une vid√©o anim√©e √† partir d'une description de sc√®ne en utilisant ModelsLab Video Fusion API.
    </p>
    <form id="video-generation-form" enctype="multipart/form-data">
        <fieldset>
            <legend>Description de la sc√®ne</legend>
            <label>
                Description de la sc√®ne :
                <textarea name="prompt" id="video-prompt-input" rows="6" style="width: 100%; padding: 8px; font-family: inherit;" placeholder="D√©crivez la sc√®ne de la vid√©o que vous souhaitez g√©n√©rer..." required></textarea>
            </label>
        </fieldset>
        <fieldset>
            <legend>Dur√©e</legend>
            <label>
                Dur√©e de la vid√©o :
                <select name="duration" id="video-duration" style="width: 100%; padding: 8px;" required>
                    <option value="4">4 secondes</option>
                    <option value="8" selected>8 secondes</option>
                    <option value="12">12 secondes</option>
                </select>
            </label>
        </fieldset>
        <fieldset>
            <legend>Images de r√©f√©rence</legend>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">
                    Style artistique :
                </label>
                <input type="file" name="style_image" id="style-image" accept="image/*" style="padding: 8px; width: 100%;">
                <div id="style-image-preview" style="margin-top: 10px; display: none;">
                    <img id="style-image-preview-img" src="" alt="Style preview" style="max-width: 200px; border: 1px solid #ddd; border-radius: 3px;">
                </div>
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">
                    Personnages (optionnel) :
                </label>
                <div id="characters-container">
                    <div class="character-upload" style="margin-bottom: 10px;">
                        <input type="text" name="character_name[]" placeholder="Nom du personnage" style="width: 200px; padding: 5px; margin-right: 10px;">
                        <input type="file" name="character_image[]" accept="image/*" style="padding: 5px; width: 300px;">
                        <button type="button" class="remove-character" style="padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer; margin-left: 10px;">Supprimer</button>
                    </div>
                </div>
                <button type="button" id="add-character-btn" style="margin-top: 10px; padding: 5px 15px; background: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer;">+ Ajouter un personnage</button>
            </div>
            <div>
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">
                    Environnement :
                </label>
                <input type="file" name="environment_image" id="environment-image" accept="image/*" style="padding: 8px; width: 100%;">
                <div id="environment-image-preview" style="margin-top: 10px; display: none;">
                    <img id="environment-image-preview-img" src="" alt="Environment preview" style="max-width: 200px; border: 1px solid #ddd; border-radius: 3px;">
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend>Audio</legend>
            <label style="display: block; margin-bottom: 10px;">
                <input type="checkbox" name="enable_audio" id="enable-audio" checked>
                Activer l'audio
            </label>
            <label style="display: block; margin-bottom: 10px;">
                <input type="checkbox" name="allow_ambient_sound" id="allow-ambient-sound" checked>
                Autoriser les sons ambiants (vent, pas, eau, nature, etc.)
            </label>
            <label style="display: block; margin-bottom: 10px;">
                <input type="checkbox" name="disable_music" id="disable-music" checked>
                D√©sactiver la musique de fond
            </label>
            <label style="display: block; margin-bottom: 10px;">
                <input type="checkbox" name="disable_voices" id="disable-voices" checked>
                D√©sactiver les voix et dialogues
            </label>
        </fieldset>
        <button type="submit" id="generate-video-btn" style="margin-top: 15px; padding: 10px 20px; background: #9c27b0; color: white; border: none; border-radius: 5px; cursor: pointer;">
            üé¨ G√©n√©rer la vid√©o
        </button>
    </form>
    <div id="video-generation-status" style="margin-top: 15px; padding: 10px; display: none;"></div>
    <div id="generated-video-container" style="margin-top: 20px; display: none;">
        <video id="generated-video" controls style="max-width: 100%; border: 1px solid #ddd; border-radius: 5px; margin-bottom: 10px;"></video>
        <a id="download-video-link" href="" download style="display: inline-block; padding: 8px 15px; background: #9c27b0; color: white; text-decoration: none; border-radius: 3px;">T√©l√©charger la vid√©o</a>
    </div>
</section>
{% endif %}

<section id="text-to-video-section" style="display: none;">
         <h3>Image g√©n√©r√©e :</h3>
         <div id="generated-image-wrapper" style="margin-top: 10px;">
             <img id="generated-image" src="" alt="Generated image" style="max-width: 100%; border: 1px solid #ddd; border-radius: 5px;">
         </div>
         <div style="margin-top: 10px;">
             <a id="download-image-link" href="" download style="padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; display: inline-block;">
                 üì• T√©l√©charger l'image
             </a>
         </div>
     </div>
 </section>
 {% endif %}

 <!-- Text-to-Video Generation (Hidden Feature) -->
 <section id="text-to-video-section" style="display: none; margin-bottom: 30px; padding: 20px; border: 2px dashed #ccc; background: #f9f9f9;">
     <h2>üé¨ G√©n√©rer une vid√©o √† partir de texte (Stable Diffusion)</h2>
     <p style="color: #666; font-size: 0.9em; margin-bottom: 15px;">
         Cette fonctionnalit√© g√©n√®re une vid√©o √† partir de texte en utilisant Stable Diffusion WebUI et des mod√®les Dreambooth.
     </p>
     <form id="text-to-video-form">
         <fieldset>
             <legend>Texte</legend>
             <label>
                 Texte √† convertir en vid√©o :
                 <textarea name="text" id="text-to-video-input" rows="5" style="width: 100%; padding: 8px; font-family: inherit;" placeholder="Entrez le texte ici..."></textarea>
             </label>
         </fieldset>
         <fieldset>
             <legend>Personnage (optionnel)</legend>
             <label>
                 S√©lectionner un personnage :
                 <select name="character_id" id="text-to-video-character" style="width: 100%; padding: 8px;">
                     <option value="">Aucun personnage</option>
                 </select>
             </label>
             <p style="font-size: 0.9em; color: #666; margin-top: 5px;">
                 Les personnages entra√Æn√©s seront automatiquement utilis√©s dans la g√©n√©ration.
             </p>
         </fieldset>
         <fieldset>
             <legend>Param√®tres</legend>
             <label>
                 Mod√®le Dreambooth (optionnel, ignor√© si un personnage est s√©lectionn√©) :
                 <input type="text" name="model_name" id="text-to-video-model" placeholder="Nom du mod√®le (laisser vide pour le mod√®le par d√©faut)" style="width: 100%; padding: 8px;">
             </label>
             <label style="margin-top: 10px; display: block;">
                 <input type="checkbox" name="image_per_sentence" id="text-to-video-sentence" checked>
                 G√©n√©rer une image par phrase
             </label>
         </fieldset>
         <fieldset>
             <legend>Dossier (optionnel)</legend>
             <label>
                 Dossier :
                 <select name="folder_path" id="text-to-video-folder">
                     <option value="">Aucun dossier (racine)</option>
                 </select>
             </label>
         </fieldset>
         <fieldset>
             <legend>Confidentialit√©</legend>
             <label>
                 <input type="checkbox" name="is_private" id="text-to-video-private">
                 Fichier priv√© (visible uniquement par les √©diteurs)
             </label>
         </fieldset>
         <button type="submit" id="text-to-video-submit" style="margin-top: 15px; padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
             G√©n√©rer la vid√©o
         </button>
     </form>
     <div id="text-to-video-status" style="margin-top: 15px; padding: 10px; display: none;"></div>
 </section>

 {% if is_editor %}
 <section id="upload" style="display: block;">
    <h2>Actions</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
        
        <!-- 1. Transcrire -->
        <div class="action-card" style="border: 2px solid #007bff; border-radius: 8px; padding: 20px; background: #f0f8ff;">
            <h3>üé§ Transcrire</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez un fichier audio ou vid√©o pour le transcrire et l'am√©liorer. La transcription corrig√©e peut √™tre t√©l√©charg√©e.</p>
            <button type="button" class="action-button" id="transcribe-button" style="width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                Transcrire
            </button>
            <div id="transcribe-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">Transcrire un fichier audio/vid√©o</h3>
                    <form id="transcribe-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier audio ou vid√©o :</label>
                            <input type="file" id="transcribe-file" accept="audio/*,video/*" required style="width: 100%; padding: 8px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue source :</label>
                            <select id="transcribe-source-lang" required style="width: 100%; padding: 8px;">
                                <option value="fr">Fran√ßais</option>
                                <option value="nl">N√©erlandais</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="pt">Portugais</option>
                </select>
         </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" id="transcribe-improve-ai" style="margin-right: 8px;">
                                <span>Am√©liorer le texte avec l'IA (optionnel)</span>
                 </label>
             </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                Transcrire
                            </button>
                            <button type="button" class="close-modal" data-modal="transcribe-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
                    </form>
                    <div id="transcribe-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <!-- 2. Traduire -->
        <div class="action-card" style="border: 2px solid #28a745; border-radius: 8px; padding: 20px; background: #f0fff4;">
            <h3>üåç Traduire</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez un fichier texte pour le traduire dans la langue choisie. Le r√©sultat peut √™tre t√©l√©charg√©.</p>
            <button type="button" class="action-button" id="translate-button" style="width: 100%; padding: 12px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                Traduire
            </button>
            <div id="translate-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">Traduire un fichier texte</h3>
                    <form id="translate-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier texte :</label>
                            <input type="file" id="translate-file" accept=".txt,.text" required style="width: 100%; padding: 8px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue source :</label>
                            <select id="translate-source-lang" required style="width: 100%; padding: 8px;">
                                <option value="fr">Fran√ßais</option>
                                <option value="nl">N√©erlandais</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="pt">Portugais</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue cible :</label>
                            <select id="translate-target-lang" required style="width: 100%; padding: 8px;">
                                {% for lang in available_languages %}
                                <option value="{{ lang.code }}">{{ lang.label }}{% if lang.provider == "ai" %}*{% endif %}</option>
                                {% endfor %}
                            </select>
                            <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Les langues marqu√©es d'un * utilisent le traducteur IA.</p>
             </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                     Traduire
                            </button>
                            <button type="button" class="close-modal" data-modal="translate-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
                    </form>
                    <div id="translate-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <!-- 3. Audio genereren -->
        <div class="action-card" style="border: 2px solid #9c27b0; border-radius: 8px; padding: 20px; background: #f3e5f5;">
            <h3>üîä Audio genereren</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez un fichier texte pour le faire lire par une voix artificielle dans la langue choisie.</p>
            <button type="button" class="action-button" id="generate-audio-button" style="width: 100%; padding: 12px; background: #9c27b0; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                G√©n√©rer audio
            </button>
            <div id="generate-audio-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">G√©n√©rer un fichier audio √† partir d'un texte</h3>
                    <form id="generate-audio-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier texte :</label>
                            <input type="file" id="generate-audio-file" accept=".txt,.text" required style="width: 100%; padding: 8px;">
             </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue (pour la voix) :</label>
                            <select id="generate-audio-lang" required style="width: 100%; padding: 8px;">
             {% for lang in available_languages %}
                                <option value="{{ lang.code }}">{{ lang.label }}{% if lang.provider == "ai" %}*{% endif %}</option>
             {% endfor %}
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #9c27b0; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                G√©n√©rer
                            </button>
                            <button type="button" class="close-modal" data-modal="generate-audio-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
                    </form>
                    <div id="generate-audio-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <!-- 4. Upload video -->
        <div class="action-card" style="border: 2px solid #ff9800; border-radius: 8px; padding: 20px; background: #fff3e0;">
            <h3>üìπ Upload video</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez une vid√©o de votre PC pour l'ajouter √† la biblioth√®que. Une omslagfoto et la langue source sont requises.</p>
            <button type="button" class="action-button" id="upload-video-button" style="width: 100%; padding: 12px; background: #ff9800; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                Upload video
            </button>
            <div id="upload-video-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">Uploader une vid√©o vers la biblioth√®que</h3>
                    <form id="upload-video-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier vid√©o :</label>
                            <input type="file" id="upload-video-file" accept="video/*" required style="width: 100%; padding: 8px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Dossier (optionnel) :</label>
                            <select id="upload-video-folder" style="width: 100%; padding: 8px;">
                                <option value="">Aucun dossier (racine)</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue source :</label>
                            <select id="upload-video-source-lang" required style="width: 100%; padding: 8px;">
                     <option value="fr">Fran√ßais</option>
                     <option value="nl">N√©erlandais</option>
                     <option value="en">Anglais</option>
                     <option value="es">Espagnol</option>
                     <option value="pt">Portugais</option>
                 </select>
                        </div>
            <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 10px; font-weight: bold;">Omslagfoto :</label>
                            <label style="display: block; margin-bottom: 10px; cursor: pointer;">
                                <input type="radio" name="upload-video-thumbnail" value="video_frame" checked style="margin-right: 8px;">
                    Extraire un moment de la vid√©o
                </label>
                            <div id="upload-video-frame-selector" style="margin-left: 25px; margin-top: 10px;">
                    <label>
                        Temps (secondes) :
                                    <input type="number" id="upload-video-thumbnail-time" value="0" min="0" step="0.1" style="width: 100px; padding: 5px;">
                                </label>
                            </div>
                            <label style="display: block; margin-top: 10px; cursor: pointer;">
                                <input type="radio" name="upload-video-thumbnail" value="upload" style="margin-right: 8px;">
                                T√©l√©charger une image
                    </label>
                            <div id="upload-video-thumbnail-upload" style="margin-left: 25px; margin-top: 10px; display: none;">
                                <input type="file" id="upload-video-thumbnail-file" accept="image/*" style="width: 100%; padding: 8px;">
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #ff9800; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                Uploader
                            </button>
                            <button type="button" class="close-modal" data-modal="upload-video-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                    </button>
                    </div>
                    </form>
                    <div id="upload-video-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <!-- 5. Upload audio -->
        <div class="action-card" style="border: 2px solid #00bcd4; border-radius: 8px; padding: 20px; background: #e0f7fa;">
            <h3>üéµ Upload audio</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez un fichier audio de votre PC pour l'ajouter √† la biblioth√®que. La langue source est requise.</p>
            <button type="button" class="action-button" id="upload-audio-button" style="width: 100%; padding: 12px; background: #00bcd4; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                Upload audio
            </button>
            <div id="upload-audio-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">Uploader un fichier audio vers la biblioth√®que</h3>
                    <form id="upload-audio-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier audio :</label>
                            <input type="file" id="upload-audio-file" accept="audio/*" required style="width: 100%; padding: 8px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Dossier (optionnel) :</label>
                            <select id="upload-audio-folder" style="width: 100%; padding: 8px;">
                                <option value="">Aucun dossier (racine)</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue source :</label>
                            <select id="upload-audio-source-lang" required style="width: 100%; padding: 8px;">
                                <option value="fr">Fran√ßais</option>
                                <option value="nl">N√©erlandais</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="pt">Portugais</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #00bcd4; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                Uploader
                            </button>
                            <button type="button" class="close-modal" data-modal="upload-audio-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                            </button>
                    </div>
                    </form>
                    <div id="upload-audio-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

        <!-- 6. Upload tekst -->
        <div class="action-card" style="border: 2px solid #795548; border-radius: 8px; padding: 20px; background: #efebe9;">
            <h3>üìÑ Upload tekst</h3>
            <p style="margin: 10px 0; color: #666; font-size: 0.9em;">T√©l√©chargez un fichier texte de votre PC pour l'ajouter √† la biblioth√®que. La langue source est requise.</p>
            <button type="button" class="action-button" id="upload-text-button" style="width: 100%; padding: 12px; background: #795548; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold;">
                Upload tekst
            </button>
            <div id="upload-text-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; overflow-y: auto;">
                <div style="background: white; margin: 50px auto; max-width: 600px; padding: 30px; border-radius: 8px;">
                    <h3 style="margin-top: 0;">Uploader un fichier texte vers la biblioth√®que</h3>
                    <form id="upload-text-form">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Fichier texte :</label>
                            <input type="file" id="upload-text-file" accept=".txt,.text" required style="width: 100%; padding: 8px;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Dossier (optionnel) :</label>
                            <select id="upload-text-folder" style="width: 100%; padding: 8px;">
                                <option value="">Aucun dossier (racine)</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Langue source :</label>
                            <select id="upload-text-source-lang" required style="width: 100%; padding: 8px;">
                                <option value="fr">Fran√ßais</option>
                                <option value="nl">N√©erlandais</option>
                                <option value="en">Anglais</option>
                                <option value="es">Espagnol</option>
                                <option value="pt">Portugais</option>
                            </select>
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 20px;">
                            <button type="submit" style="flex: 1; padding: 12px; background: #795548; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                                Uploader
                            </button>
                            <button type="button" class="close-modal" data-modal="upload-text-modal" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
    </form>
                    <div id="upload-text-status" style="margin-top: 15px;"></div>
                </div>
            </div>
        </div>

    </div>
 </section>
 {% else %}
 <section id="upload" style="display: none;"></section>
 {% endif %}
 
 <hr>
 
 <section id="library">
     <h2>Biblioth√®que</h2>
    
    <!-- Tabs voor Video's, Audio's, Teksten -->
    <div id="library-tabs" style="margin-bottom: 20px; border-bottom: 2px solid #ddd;">
        <button class="library-tab active" data-tab="videos" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid #007bff; cursor: pointer; font-size: 16px; font-weight: bold; color: #007bff;">
            üìπ Video's
        </button>
        <button class="library-tab" data-tab="audios" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid transparent; cursor: pointer; font-size: 16px; font-weight: bold; color: #666; margin-left: 10px;">
            üéµ Audio's
        </button>
        <button class="library-tab" data-tab="texts" style="padding: 12px 24px; background: none; border: none; border-bottom: 3px solid transparent; cursor: pointer; font-size: 16px; font-weight: bold; color: #666; margin-left: 10px;">
            üìÑ Teksten
        </button>
    </div>
    
    <!-- Video's tab content (Netflix-stijl) -->
    <div id="videos-tab" class="library-tab-content" style="display: block;">
        <div id="videos-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; padding: 20px 0;"></div>
        <div id="videos-empty" style="display: none; text-align: center; padding: 40px; color: #666;">
            Aucune vid√©o disponible.
        </div>
    </div>
    
    <!-- Audio's tab content (Spotify-stijl) -->
    <div id="audios-tab" class="library-tab-content" style="display: none;">
        <div id="audios-list" style="display: flex; flex-direction: column; gap: 10px;"></div>
        <div id="audios-empty" style="display: none; text-align: center; padding: 40px; color: #666;">
            Aucun audio disponible.
        </div>
    </div>
    
    <!-- Teksten tab content (Wattpad-stijl) -->
    <div id="texts-tab" class="library-tab-content" style="display: none;">
        <div id="texts-list" style="display: flex; flex-direction: column; gap: 10px;"></div>
        <div id="texts-empty" style="display: none; text-align: center; padding: 40px; color: #666;">
            Aucun texte disponible.
        </div>
    </div>
    
     {% if is_editor %}
     <div id="folder-management" style="margin-top: 20px;">
         <button type="button" id="create-folder-btn">Cr√©er un nouveau dossier</button>
     </div>
     {% endif %}
     
     <!-- Message to Admin Section (for viewers and editors) -->
     <!-- Admin Messages Section -->
     {% if can_read_admin_messages %}
     <div id="admin-messages-section" style="margin-top: 30px; padding: 20px; border: 2px solid #dc3545; background: #f8d7da; border-radius: 5px;">
         <h3>üì¨ Messages re√ßus (de I-tech et les saints du MAI)</h3>
         <div id="admin-messages-list" style="margin-top: 15px;">
             <p>Chargement des messages...</p>
         </div>
     </div>
     {% endif %}
 </section>
 
 <section id="player">
     <h2>Lecteur</h2>
     <div id="video-container">
         <video id="video-player" controls width="800">
             Votre navigateur ne supporte pas la balise vid√©o.
         </video>
         <div id="subtitle-overlay" class="hidden"></div>
     </div>
     <div id="player-actions">
         <button type="button" id="fullscreen-button">[ ] Plein √©cran</button>
     </div>
     <div id="player-info"></div>
 </section>
 
 <!-- Message to Admin Section (moved to bottom) -->
 {% if not can_read_admin_messages %}
 <section id="message-to-admin-section" style="margin-top: 30px; padding: 20px; border: 2px solid #ffc107; background: #fff3cd; border-radius: 5px;">
     <h3>üìß Signaler un probl√®me √† l'admin</h3>
     <p style="color: #856404; margin-bottom: 15px;">Vous pouvez envoyer un message √† l'administrateur pour signaler un probl√®me ou poser une question.</p>
     <form id="message-to-admin-form">
         <textarea id="admin-message-input" rows="4" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 3px;" placeholder="D√©crivez votre probl√®me ou question..."></textarea>
         <button type="submit" style="padding: 10px 20px; background: #ffc107; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
             Envoyer le message
         </button>
     </form>
     <div id="message-status" style="margin-top: 10px; display: none;"></div>
 </section>
 {% endif %}

<!-- Detail Modal voor items (video/audio/text) -->
<div id="item-detail-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; overflow-y: auto;">
    <div style="background: white; margin: 50px auto; max-width: 900px; padding: 30px; border-radius: 8px; position: relative;">
        <button id="close-detail-modal" style="position: absolute; top: 15px; right: 15px; background: #dc3545; color: white; border: none; border-radius: 50%; width: 35px; height: 35px; cursor: pointer; font-size: 20px; font-weight: bold;">√ó</button>
        <div id="item-detail-content">
            <!-- Content wordt hier dynamisch ingevuld -->
        </div>
    </div>
</div>
 
 <script src="/static/app.js"></script>
 </body>
 </html>
